Searching Recipes
=================

NoDonuts uses a plugin called Haystack to manage searches, and a search engine
called Whoosh to index all of its recipes.

.. note::

    Currently there is a bug in django-haystack that causes errors during
    update to cascade across all other updates. Until this is fixed in the
    main version of django-haystack, this project uses a custom fork of the
    project.  Please see references below for a link to the forked project.

Configuring Search
==================


Search Basics
=============

The search page is located at http://<project_url>`/search/ </search/>`_. There
are four GET parameters that can be used with the search:

:dfn:`q`
    Keyword search terms. These will match any recipes that have these terms in
    the title, ingredients, or tags.
:dfn:`tags`
    Tag literals, separated by spaces. These will match the tags in a recipe
:dfn:`ss`
    Serving size -- i.e., how many people this recipe will serve. The number
    entered must match one of the following:

    * 0: 1-2 people
    * 1: 3-4 people
    * 2: 5-6 people
    * 3: 7-9 people
    * 4: 10-12 people
    * 5: 12-15 people
    * 6: 15-20 people
    * 7: 20-30 people
    * 8: 30-50 people
    * 9: More than 50 people

    These options can be found in recipes.models.ServingSize. People using the
    search will not have to enter these numbers manually, as the form provides
    a dropdown with the appropriate options.
:dfn:`order`
    Order that the tags should be returned. The options currently are:

    * popularity
    * newest
    * alphabeta (alphabetical ordering A-Z)
    * alphabetz (alphabetical ordering Z-A)

    These options can be found in recipes.forms.RecipeSearchForm.

.. rubric::Searching from the Home Page

Most pages (including the home page) have a keyword search bar (i.e., the bar
passes the `q` parameter for anything entered in the search bar).  Clicking the
search icon next to the bar, with or without keywords entered, will go directly
to the `search </search/>`_ page. If no search terms are entered, the user will
see a page with 0 results; otherwise, the page returns a list of any recipes
that match the keywords.



.. rubric::Searching from the Search Page

Advanced Search Syntax
======================





The syntax for the search is fairly straightforward:

*


.. seealso::

    `Django-haystack project documention <http://django-haystack.readthedocs.org/en/latest/>`_
        A general reference for the views and search API

    `Fork of the django-haystack project <https://github.com/kamni/django-haystack>`_
        The version of django-haystack used for this project

    `Whoosh documentation <http://pythonhosted.org/Whoosh/intro.html>`_
        Basics of the search engine being used for this project

